<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <style>
        body,
        html {
            padding: 0;
            margin: 0;
            font-family: SFPro, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        @font-face {
            font-family: SFPro;
            src: url(resc/SF-Pro.ttf);
        }

        .changelog {
            position: absolute;
            top: 0;
            left: 0;
            margin: 0 !important;

            width: 100%;
            height: 100%;
            overflow-y: scroll;

            padding-top: 10px;
            padding-bottom: 10px;
            box-sizing: border-box;

            display: flex;
            flex-direction: column;

            /* text-align: right; */
        }

        .changelog.darkModeOn {
            color: white !important;
        }

        .changelog>p {
            margin: 0;
            padding: 0;

            font-size: 13px;
        }

        .changelog p:first-of-type {
            margin-bottom: 20px;
        }

        .changelog ul {
            margin: 0;
            margin-left: 20px !important;
            padding: 0;
            margin-bottom: 10px;
        }

        .li-head {
            font-weight: 600;
            font-size: 12px;
            list-style-type: none;
            margin-left: -15px !important;
            margin-bottom: 2px;
        }

        .li-bullet {
            font-size: 12px;
            margin-left: 0px !important;
        }

        .li-sub {
            font-size: 12px;
            margin-left: 10px !important;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.7.0.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="changelog">
        New:
        - The shortcutCard now has an advanced editor where you can add and remove links
        -- Access from context menu
        - The clockCard has a new style option
        - The debug code is now shown at FVE incase of issues
        - Devstat for number of potentially-failed cards
        - You can now click a card in the shelf to move it to Rolodex while it's open
        - Rolodex now shows if the selected card has any context menu items

        Fixes:
        - Fixed a layout bug in backdrop control panel settings introduced in 2.8
        - Fixed changelog not being visible in dark mode
        - Fixed mono theme for a few cards
        - Fixed a bug where an expanded card would return to the front of the shelf if the page was reloaded
        - Fixed a bug with textCard saving blank text as 'undefined'
        - Fixed a bug where custom context menu items would get stuck in the menu

        Changes:
        - Removed and refined A TON of code
        - The shelf is now center-aligned by default
        - The shelf label position is now always consistent
        - Expanded cards will now return to the deck when Rolodex is opened
        - Significantly reworked the card saving/recalling system to be more streamlined and performant
    </div>

    <script>
        $(document).ready(function () {
            $(".changelog").each(function () {
                var lines = $(this).text().split("\n");
                $(this).empty();
                var currentList = null;

                for (var i = 0; i < lines.length; i++) {
                    var line = lines[i];
                    var isList = line.endsWith(":");
                    var isListItem = line.startsWith("        - ") && currentList;
                    var isListSubItem = line.startsWith("        -- ") && currentList;

                    if (isList) {
                        currentList = $("<ul>").appendTo(this);
                        currentList.append("<li class='li-head'>" + line.substring(0, line.length - 1) + "</li>");
                    } else if (isListItem) {
                        currentList.append("<li class='li-bullet'>" + line.substring(10) + "</li>");
                    } else if (isListSubItem) {
                        currentList.append("<li class='li-bullet li-sub'>" + line.substring(11) + "</li>");
                    } else {
                        var newParagraph = $("<p>" + line + "</p>");
                        if (newParagraph.text().trim() !== "") {
                            $(this).append(newParagraph);
                        }
                        currentList = null;
                    }
                }
            });

            if (localStorage.getItem('theme') == 'light') {
                $('.changelog').removeClass('darkModeOn');
            } else if (localStorage.getItem('theme') == 'dark') {
                $('.changelog').addClass('darkModeOn');
            } else if (localStorage.getItem('theme') == 'auto') {
                $('.changelog').removeClass('darkModeOn');
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    $('.changelog').addClass('darkModeOn');
                } else {
                    $('.changelog').removeClass('darkModeOn');
                }
            } else {
                $('.changelog').removeClass('darkModeOn');
            }

        });
    </script>
</body>

</html>